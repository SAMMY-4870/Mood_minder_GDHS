{% extends 'base.html' %}
{% block title %}Wellness Center ¬∑ Happy Quotes{% endblock %}
{% block extra_css %}
<link href="{{ url_for('static', filename='css/pages/games.css') }}" rel="stylesheet">
<style>
.wellness-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.wellness-header {
    text-align: center;
    margin-bottom: 40px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 40px 20px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
}

.wellness-header h1 {
    font-size: 2.5rem;
    margin-bottom: 10px;
}

.wellness-header p {
    font-size: 1.2rem;
    opacity: 0.9;
}

.wellness-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 30px;
    margin-bottom: 40px;
}

.wellness-card {
    background: white;
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border-left: 5px solid #667eea;
}

.wellness-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 20px 40px rgba(0,0,0,0.15);
}

.wellness-card h3 {
    color: #333;
    margin-bottom: 15px;
    font-size: 1.4rem;
    display: flex;
    align-items: center;
    gap: 10px;
}

.wellness-card .icon {
    font-size: 1.8rem;
}

.wellness-card p {
    color: #666;
    margin-bottom: 20px;
    line-height: 1.6;
}

.wellness-card .tips-list {
    list-style: none;
    padding: 0;
}

.wellness-card .tips-list li {
    padding: 8px 0;
    border-bottom: 1px solid #f0f0f0;
    color: #555;
    position: relative;
    padding-left: 25px;
}

.wellness-card .tips-list li:before {
    content: "‚úì";
    position: absolute;
    left: 0;
    color: #667eea;
    font-weight: bold;
}

.wellness-card .tips-list li:last-child {
    border-bottom: none;
}

.action-buttons {
    display: flex;
    gap: 10px;
    margin-top: 20px;
    flex-wrap: wrap;
}

.btn-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    padding: 12px 20px;
    border-radius: 25px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-block;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(111, 66, 193, 0.3);
    color: white;
    text-decoration: none;
}

.btn-secondary {
    background: #f8f9fa;
    color: #667eea;
    border: 2px solid #667eea;
    padding: 10px 18px;
    border-radius: 25px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-block;
}

.btn-secondary:hover {
    background: #667eea;
    color: white;
    text-decoration: none;
}

.mood-activities {
    background: #e3f2fd;
    border-radius: 20px;
    padding: 30px;
    margin-bottom: 30px;
}

.mood-activities h3 {
    color: #1976d2;
    margin-bottom: 20px;
    text-align: center;
}

.mood-selector {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-bottom: 20px;
    flex-wrap: wrap;
}

.mood-btn {
    padding: 10px 20px;
    border: 2px solid #1976d2;
    background: white;
    color: #1976d2;
    border-radius: 25px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-weight: bold;
}

.mood-btn:hover,
.mood-btn.active {
    background: #1976d2;
    color: white;
}

.activities-display {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.activity-category {
    background: white;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.activity-category h4 {
    color: #1976d2;
    margin-bottom: 15px;
    font-size: 1.1rem;
}

.activity-category ul {
    list-style: none;
    padding: 0;
}

.activity-category li {
    padding: 5px 0;
    color: #555;
    position: relative;
    padding-left: 20px;
}

.activity-category li:before {
    content: "‚Ä¢";
    position: absolute;
    left: 0;
    color: #1976d2;
    font-weight: bold;
}

.symptom-checker {
    background: #fff3e0;
    border-radius: 20px;
    padding: 30px;
    margin-bottom: 30px;
}

.symptom-checker h3 {
    color: #f57c00;
    margin-bottom: 20px;
    text-align: center;
}

.symptom-input {
    width: 100%;
    padding: 15px;
    border: 2px solid #f57c00;
    border-radius: 10px;
    font-size: 1rem;
    margin-bottom: 15px;
    outline: none;
}

.symptom-input:focus {
    border-color: #e65100;
    box-shadow: 0 0 0 3px rgba(245, 124, 0, 0.1);
}

.disclaimer {
    background: #ffebee;
    border: 1px solid #f44336;
    border-radius: 10px;
    padding: 15px;
    margin-top: 20px;
    color: #c62828;
    font-size: 0.9rem;
    text-align: center;
}

.loading {
    text-align: center;
    padding: 20px;
    color: #666;
}

.loading:after {
    content: "...";
    animation: dots 1.5s infinite;
}

@keyframes dots {
    0%, 20% { content: ""; }
    40% { content: "."; }
    60% { content: ".."; }
    80%, 100% { content: "..."; }
}

@media (max-width: 768px) {
    .wellness-container {
        padding: 10px;
    }
    
    .wellness-header h1 {
        font-size: 2rem;
    }
    
    .wellness-grid {
        grid-template-columns: 1fr;
        gap: 20px;
    }
    
    .mood-selector {
        flex-direction: column;
        align-items: center;
    }
    
    .activities-display {
        grid-template-columns: 1fr;
    }
    
    .action-buttons {
        flex-direction: column;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="wellness-container">
    <div class="wellness-header">
        <h1>üè• Wellness Center</h1>
        <p>Your comprehensive health and wellness companion</p>
    </div>

    <!-- Daily Health Tips -->
    <div class="wellness-grid">
        <div class="wellness-card">
            <h3><span class="icon">üí°</span> Daily Health Tips</h3>
            <p>Get personalized health and wellness tips for your daily routine.</p>
            <div class="action-buttons">
                <button class="btn-primary" onclick="loadHealthTips('general')">General Tips</button>
                <button class="btn-secondary" onclick="loadHealthTips('nutrition')">Nutrition</button>
                <button class="btn-secondary" onclick="loadHealthTips('fitness')">Fitness</button>
                <button class="btn-secondary" onclick="loadHealthTips('sleep')">Sleep</button>
            </div>
            <div id="healthTipsContent"></div>
        </div>

        <div class="wellness-card">
            <h3><span class="icon">üí™</span> Fitness Guidance</h3>
            <p>Get personalized fitness suggestions based on your experience level.</p>
            <div class="action-buttons">
                <button class="btn-primary" onclick="loadFitnessSuggestions('beginner')">Beginner</button>
                <button class="btn-secondary" onclick="loadFitnessSuggestions('intermediate')">Intermediate</button>
                <button class="btn-secondary" onclick="loadFitnessSuggestions('advanced')">Advanced</button>
            </div>
            <div id="fitnessContent"></div>
        </div>

        <div class="wellness-card">
            <h3><span class="icon">üò¥</span> Sleep Improvement</h3>
            <p>Learn effective strategies to improve your sleep quality and duration.</p>
            <div class="action-buttons">
                <button class="btn-primary" onclick="loadSleepTips()">Get Sleep Tips</button>
            </div>
            <div id="sleepContent"></div>
        </div>

        <div class="wellness-card">
            <h3><span class="icon">ü•ó</span> Nutrition Guidance</h3>
            <p>Get personalized nutrition advice based on your health goals.</p>
            <div class="action-buttons">
                <button class="btn-primary" onclick="loadNutritionGuidance('general_health')">General Health</button>
                <button class="btn-secondary" onclick="loadNutritionGuidance('weight_management')">Weight Management</button>
                <button class="btn-secondary" onclick="loadNutritionGuidance('energy_boost')">Energy Boost</button>
                <button class="btn-secondary" onclick="loadNutritionGuidance('heart_health')">Heart Health</button>
            </div>
            <div id="nutritionContent"></div>
        </div>
    </div>

    <!-- Mood-Based Activities -->
    <div class="mood-activities">
        <h3>üé≠ Mood-Based Activity Suggestions</h3>
        <p style="text-align: center; color: #666; margin-bottom: 20px;">
            Select your current mood to get personalized activity recommendations
        </p>
        
        <div class="mood-selector">
            <button class="mood-btn" onclick="loadMoodActivities('sad')">üò¢ Sad</button>
            <button class="mood-btn" onclick="loadMoodActivities('stressed')">üò∞ Stressed</button>
            <button class="mood-btn" onclick="loadMoodActivities('anxious')">üòü Anxious</button>
            <button class="mood-btn" onclick="loadMoodActivities('energetic')">‚ö° Energetic</button>
            <button class="mood-btn" onclick="loadMoodActivities('moderate')">üòê Moderate</button>
        </div>
        
        <div id="moodActivitiesContent"></div>
    </div>

    <!-- AI Symptom Checker -->
    <div class="symptom-checker">
        <h3>ü©∫ AI Symptom Checker</h3>
        <p style="text-align: center; color: #666; margin-bottom: 20px;">
            Describe your symptoms for general health guidance (not medical diagnosis)
        </p>
        
        <input type="text" class="symptom-input" id="symptomInput" 
               placeholder="e.g., headache and fatigue, trouble sleeping, feeling stressed...">
        
        <div class="action-buttons" style="justify-content: center;">
            <button class="btn-primary" onclick="getSymptomGuidance()">Get Guidance</button>
        </div>
        
        <div id="symptomContent"></div>
        
        <div class="disclaimer">
            <strong>‚ö†Ô∏è Important:</strong> This is general health guidance only. Always consult a healthcare provider for medical concerns, persistent symptoms, or emergencies.
        </div>
    </div>
</div>

<script>
// Health Tips Functions
function loadHealthTips(category) {
    const content = document.getElementById('healthTipsContent');
    content.innerHTML = '<div class="loading">Loading tips</div>';
    
    fetch(`/api/health-tips?category=${category}`)
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                const tipsList = data.tips.map(tip => `<li>${tip}</li>`).join('');
                content.innerHTML = `
                    <h4>${category.charAt(0).toUpperCase() + category.slice(1)} Health Tips:</h4>
                    <ul class="tips-list">${tipsList}</ul>
                `;
            } else {
                content.innerHTML = '<p style="color: #f44336;">Error loading tips. Please try again.</p>';
            }
        })
        .catch(error => {
            console.error('Error:', error);
            content.innerHTML = '<p style="color: #f44336;">Error loading tips. Please try again.</p>';
        });
}

// Fitness Suggestions Functions
function loadFitnessSuggestions(level) {
    const content = document.getElementById('fitnessContent');
    content.innerHTML = '<div class="loading">Loading suggestions</div>';
    
    fetch(`/api/fitness-suggestions?level=${level}`)
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                const suggestionsList = data.suggestions.map(suggestion => `<li>${suggestion}</li>`).join('');
                content.innerHTML = `
                    <h4>${level.charAt(0).toUpperCase() + level.slice(1)} Level Fitness:</h4>
                    <ul class="tips-list">${suggestionsList}</ul>
                `;
            } else {
                content.innerHTML = '<p style="color: #f44336;">Error loading suggestions. Please try again.</p>';
            }
        })
        .catch(error => {
            console.error('Error:', error);
            content.innerHTML = '<p style="color: #f44336;">Error loading suggestions. Please try again.</p>';
        });
}

// Sleep Tips Functions
function loadSleepTips() {
    const content = document.getElementById('sleepContent');
    content.innerHTML = '<div class="loading">Loading sleep tips</div>';
    
    fetch('/api/sleep-tips')
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                const tipsList = data.tips.map(tip => `<li>${tip}</li>`).join('');
                content.innerHTML = `
                    <h4>Sleep Improvement Tips:</h4>
                    <ul class="tips-list">${tipsList}</ul>
                `;
            } else {
                content.innerHTML = '<p style="color: #f44336;">Error loading sleep tips. Please try again.</p>';
            }
        })
        .catch(error => {
            console.error('Error:', error);
            content.innerHTML = '<p style="color: #f44336;">Error loading sleep tips. Please try again.</p>';
        });
}

// Nutrition Guidance Functions
function loadNutritionGuidance(goal) {
    const content = document.getElementById('nutritionContent');
    content.innerHTML = '<div class="loading">Loading nutrition guidance</div>';
    
    fetch(`/api/nutrition-guidance?goal=${goal}`)
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                const guidanceList = data.guidance.map(item => `<li>${item}</li>`).join('');
                const goalName = goal.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase());
                content.innerHTML = `
                    <h4>${goalName} Nutrition:</h4>
                    <ul class="tips-list">${guidanceList}</ul>
                `;
            } else {
                content.innerHTML = '<p style="color: #f44336;">Error loading nutrition guidance. Please try again.</p>';
            }
        })
        .catch(error => {
            console.error('Error:', error);
            content.innerHTML = '<p style="color: #f44336;">Error loading nutrition guidance. Please try again.</p>';
        });
}

// Mood Activities Functions
function loadMoodActivities(mood) {
    // Update active button
    document.querySelectorAll('.mood-btn').forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
    
    const content = document.getElementById('moodActivitiesContent');
    content.innerHTML = '<div class="loading">Loading activities</div>';
    
    fetch(`/api/mood-activities?mood=${mood}`)
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                const activities = data.activities;
                content.innerHTML = `
                    <div class="activities-display">
                        <div class="activity-category">
                            <h4>Immediate Actions</h4>
                            <ul>${activities.immediate.map(activity => `<li>${activity}</li>`).join('')}</ul>
                        </div>
                        <div class="activity-category">
                            <h4>App Features</h4>
                            <ul>${activities.app_features.map(activity => `<li>${activity}</li>`).join('')}</ul>
                        </div>
                    </div>
                `;
            } else {
                content.innerHTML = '<p style="color: #f44336;">Error loading activities. Please try again.</p>';
            }
        })
        .catch(error => {
            console.error('Error:', error);
            content.innerHTML = '<p style="color: #f44336;">Error loading activities. Please try again.</p>';
        });
}

// Symptom Guidance Functions
function getSymptomGuidance() {
    const symptoms = document.getElementById('symptomInput').value.trim();
    if (!symptoms) {
        alert('Please describe your symptoms first.');
        return;
    }
    
    const content = document.getElementById('symptomContent');
    content.innerHTML = '<div class="loading">Analyzing symptoms</div>';
    
    fetch('/api/symptom-guidance', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ symptoms: symptoms })
    })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                const guidanceList = data.guidance.map(item => `<li>${item}</li>`).join('');
                content.innerHTML = `
                    <h4>General Health Guidance for: "${symptoms}"</h4>
                    <ul class="tips-list">${guidanceList}</ul>
                `;
            } else {
                content.innerHTML = '<p style="color: #f44336;">Error processing symptoms. Please try again.</p>';
            }
        })
        .catch(error => {
            console.error('Error:', error);
            content.innerHTML = '<p style="color: #f44336;">Error processing symptoms. Please try again.</p>';
        });
}

// Allow Enter key for symptom input
document.getElementById('symptomInput').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        getSymptomGuidance();
    }
});
</script>
{% endblock %}
